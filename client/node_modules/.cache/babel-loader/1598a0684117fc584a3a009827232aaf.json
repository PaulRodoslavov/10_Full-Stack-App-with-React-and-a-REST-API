{"ast":null,"code":"import _defineProperty from \"/Users/pasharodoslavov/Desktop/Techdegryee/fullstuck/10.full_stack_app_with_react_and_a_rest_api/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/pasharodoslavov/Desktop/Techdegryee/fullstuck/10.full_stack_app_with_react_and_a_rest_api/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/pasharodoslavov/Desktop/Techdegryee/fullstuck/10.full_stack_app_with_react_and_a_rest_api/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/pasharodoslavov/Desktop/Techdegryee/fullstuck/10.full_stack_app_with_react_and_a_rest_api/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/pasharodoslavov/Desktop/Techdegryee/fullstuck/10.full_stack_app_with_react_and_a_rest_api/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/pasharodoslavov/Desktop/Techdegryee/fullstuck/10.full_stack_app_with_react_and_a_rest_api/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/pasharodoslavov/Desktop/Techdegryee/fullstuck/10.full_stack_app_with_react_and_a_rest_api/client/src/components/UpdateCourse.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from \"react-router-dom\";\nimport axios from \"axios\";\n\nvar UpdateCourse =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UpdateCourse, _Component);\n\n  function UpdateCourse() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, UpdateCourse);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(UpdateCourse)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.updateCourse = function (event) {\n      event.preventDefault();\n      var _this$state = _this.state,\n          title = _this$state.title,\n          description = _this$state.description,\n          estimatedTime = _this$state.estimatedTime,\n          materialsNeeded = _this$state.materialsNeeded,\n          user = _this$state.user;\n      var session_url = \"http://localhost:5000/api/courses/\".concat(_this.props.id);\n      var name = _this.state.user.emailAddress;\n      var pass = _this.state.user.password;\n      axios.put(session_url, {}, {\n        auth: {\n          username: name,\n          password: pass\n        },\n        data: {\n          title: title,\n          description: description,\n          estimatedTime: estimatedTime,\n          materialsNeeded: materialsNeeded,\n          user: user\n        }\n      }).then(function (response) {\n        // console.log(response)\n        if (response.status === 204) _this.props.history.push(\"/courses/\".concat(_this.props.id));\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    _this.state = {\n      res: '',\n      validTitle: 'Please provide a value for \"Title\" - min 5 characters',\n      validDescrip: 'Please provide a value for \"Description\" - min 5 characters',\n      user: _this.props.user.idUserLogin,\n      title: '',\n      description: '',\n      estimatedTime: '',\n      materialsNeeded: ''\n    };\n\n    _this.onChange = function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    };\n\n    _this.validTitle = function (event) {\n      _this.setState({\n        valueTitle: event.target.value\n      });\n\n      console.log(event.target.value);\n    };\n\n    _this.validDescrip = function (event) {\n      _this.setState({\n        valueDescrip: event.target.value\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(UpdateCourse, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      fetch(\"http://localhost:5000/api/courses/\".concat(this.props.id)).then(function (res) {\n        if (res.ok) {\n          _this2.setState({\n            isLoding: false\n          });\n\n          return res.json();\n        } else {\n          _this2.props.history.push('/notfound');\n        }\n      }).then(function (res) {\n        if (res.user._id !== _this2.props.user.idUserLogin) {\n          _this2.props.history.push('/forbidden');\n\n          return;\n        }\n\n        _this2.setState({\n          res: res,\n          title: res.title,\n          description: res.description,\n          estimatedTime: res.estimatedTime,\n          materialsNeeded: res.materialsNeeded,\n          firstName: res.user.firstName,\n          lastName: res.user.lastName\n        });\n      }).catch(function (error) {\n        console.log('Error fetching and parsing data', error);\n      });\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {}\n  }, {\n    key: \"removeElement\",\n    value: function removeElement() {\n      var validWrap = document.querySelector(\".validation-wrapper\");\n\n      if (validWrap) {\n        if (this.state.title.length > 4 && this.state.description.length > 4) {\n          validWrap.style.display = \"none\";\n        } else {\n          validWrap.style.display = \"block\";\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      if (this.state.res.user._id) console.log(this.state.res.user._id);\n      this.removeElement(); // if (this.state.res.user._id !== this.props.user.idUserLogin) {\n      //    this.props.history.push('/forbidden');\n      //    return\n      // }\n\n      return React.createElement(\"div\", {\n        className: \"bounds course--detail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"Update Course\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"validation-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"validation--errors--label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Validation errors\"), React.createElement(\"div\", {\n        className: \"validation-errors\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        className: \"validTitle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, this.state.title.length > 4 ? \"\" : this.state.validTitle), React.createElement(\"li\", {\n        className: \"validDescrip\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, this.state.description.length > 4 ? \"\" : this.state.validDescrip))))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"grid-66\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"course--header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        className: \"course--label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"Course\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        id: \"title\",\n        name: \"title\",\n        onChange: this.onChange,\n        type: \"text\",\n        className: \"input-title course--title--input\",\n        placeholder: \"Course title...\",\n        value: this.state.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, this.state.firstName + \" \" + this.state.lastName)), React.createElement(\"div\", {\n        className: \"course--description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        id: \"description\",\n        name: \"description\",\n        value: this.state.description,\n        onChange: this.onChange,\n        className: \"\",\n        placeholder: \"Course description...\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"grid-25 grid-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"course--stats\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"course--stats--list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        className: \"course--stats--list--item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, \"Estimated Time\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        id: \"estimatedTime\",\n        name: \"estimatedTime\",\n        value: this.state.estimatedTime,\n        onChange: this.onChange,\n        type: \"text\",\n        className: \"course--time--input\",\n        placeholder: \"Hours\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }))), React.createElement(\"li\", {\n        className: \"course--stats--list--item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, \"Materials Needed\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        id: \"materialsNeeded\",\n        name: \"materialsNeeded\",\n        value: this.state.materialsNeeded,\n        onChange: this.onChange,\n        className: \"\",\n        placeholder: \"List materials...\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      })))))), React.createElement(\"div\", {\n        className: \"grid-100 pad-bottom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"button\",\n        onClick: this.updateCourse,\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, \"Update Course\"), React.createElement(\"button\", {\n        className: \"button button-secondary\",\n        onClick: function onClick() {\n          return _this3.props.history.push(\"/courses/\".concat(_this3.props.id));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, \"Cancel\")))));\n    }\n  }]);\n\n  return UpdateCourse;\n}(Component);\n\nexport default withRouter(UpdateCourse);","map":{"version":3,"sources":["/Users/pasharodoslavov/Desktop/Techdegryee/fullstuck/10.full_stack_app_with_react_and_a_rest_api/client/src/components/UpdateCourse.js"],"names":["React","Component","withRouter","axios","UpdateCourse","updateCourse","event","preventDefault","state","title","description","estimatedTime","materialsNeeded","user","session_url","props","id","name","emailAddress","pass","password","put","auth","username","data","then","response","status","history","push","catch","error","console","log","res","validTitle","validDescrip","idUserLogin","onChange","setState","target","value","valueTitle","valueDescrip","fetch","ok","isLoding","json","_id","firstName","lastName","validWrap","document","querySelector","length","style","display","removeElement"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from \"react-router-dom\";\nimport axios from \"axios\";\nclass UpdateCourse extends Component {\n\n   componentDidMount() {\n      fetch(`http://localhost:5000/api/courses/${this.props.id}`)\n      .then(res => {\n         if(res.ok) {\n            this.setState({isLoding:false})\n            return res.json()\n         }  else {\n            this.props.history.push('/notfound');\n         }\n      })\n      .then(res => {\n         if (res.user._id !== this.props.user.idUserLogin) {\n            this.props.history.push('/forbidden');\n            return\n         }\n         this.setState({\n         res:res,\n         title: res.title,\n         description: res.description,\n         estimatedTime: res.estimatedTime,\n         materialsNeeded: res.materialsNeeded,\n         firstName: res.user.firstName,\n         lastName: res.user.lastName,\n         });\n      })\n      .catch(error => {\n         console.log('Error fetching and parsing data', error);\n      }\n   )};\n\n   componentWillMount () {\n\n   }\n\n   updateCourse = event => {\n      event.preventDefault();\n      const {\n        title,\n        description,\n        estimatedTime,\n        materialsNeeded,\n        user\n      } = this.state;\n\n      const session_url = `http://localhost:5000/api/courses/${this.props.id}`;\n      const name = this.state.user.emailAddress;\n      const pass = this.state.user.password;\n      axios.put(session_url, {}, {\n         auth: {\n            username: name,\n            password: pass\n         },\n         data: {\n            title: title,\n            description: description,\n            estimatedTime: estimatedTime,\n            materialsNeeded: materialsNeeded,\n            user: user\n         }\n      }).then( response => {\n      // console.log(response)\n      if (response.status === 204 ) this.props.history.push(`/courses/${this.props.id}`);\n   }).catch(error => {\n        console.log(error);\n      });\n   }\n\n   state = {\n      res:'',\n      validTitle: 'Please provide a value for \"Title\" - min 5 characters',\n      validDescrip: 'Please provide a value for \"Description\" - min 5 characters',\n      user: this.props.user.idUserLogin,\n      title:'',\n      description:'',\n      estimatedTime:'',\n      materialsNeeded:''\n   }\n\nonChange = event => {\n   this.setState({[event.target.name]: event.target.value});\n}\n\nvalidTitle = (event) => {\n    this.setState({valueTitle: event.target.value});\n    console.log(event.target.value)\n}\n  validDescrip = (event) => {\n      this.setState({valueDescrip: event.target.value});\n}\nremoveElement () {\n   const validWrap = document.querySelector(\".validation-wrapper\");\n   if (validWrap) {\n      if(this.state.title.length > 4 && this.state.description.length > 4) {\n         validWrap.style.display = \"none\"\n      } else {\n         validWrap.style.display = \"block\"\n      }\n   }\n}\n\n\n   render() {\n      if (this.state.res.user._id) console.log(this.state.res.user._id)\n this.removeElement ();\n    // if (this.state.res.user._id !== this.props.user.idUserLogin) {\n    //    this.props.history.push('/forbidden');\n    //    return\n    // }\n      return(\n         <div className=\"bounds course--detail\">\n           <h1>Update Course</h1>\n           <div>\n             <div className = \"validation-wrapper\">\n               <h2 className=\"validation--errors--label\">Validation errors</h2>\n               <div className=\"validation-errors\">\n                 <ul>\n                    <li className=\"validTitle\">{this.state.title.length > 4 ? \"\" : this.state.validTitle}</li>\n                    <li className=\"validDescrip\">{this.state.description.length > 4 ? \"\" : this.state.validDescrip}</li>\n                 </ul>\n               </div>\n             </div>\n           </div>\n           <div>\n             <form>\n               <div className=\"grid-66\">\n                 <div className=\"course--header\">\n                   <h4 className=\"course--label\">Course</h4>\n                   <div><input id=\"title\" name=\"title\" onChange={this.onChange} type=\"text\" className=\"input-title course--title--input\" placeholder=\"Course title...\"\n                       value={this.state.title}/></div>\n                   <p>{this.state.firstName + \" \" + this.state.lastName }</p>\n                 </div>\n                 <div className=\"course--description\">\n                   <div>\n                      <textarea id=\"description\" name=\"description\" value={this.state.description} onChange={this.onChange} className=\"\" placeholder=\"Course description...\">\n                      </textarea>\n                   </div>\n                 </div>\n               </div>\n               <div className=\"grid-25 grid-right\">\n                 <div className=\"course--stats\">\n                   <ul className=\"course--stats--list\">\n                     <li className=\"course--stats--list--item\">\n                       <h4>Estimated Time</h4>\n                       <div><input id=\"estimatedTime\" name=\"estimatedTime\"  value={this.state.estimatedTime} onChange={this.onChange} type=\"text\" className=\"course--time--input\"\n                           placeholder=\"Hours\"/></div>\n                     </li>\n                     <li className=\"course--stats--list--item\">\n                       <h4>Materials Needed</h4>\n                       <div>\n                          <textarea id=\"materialsNeeded\" name=\"materialsNeeded\" value={this.state.materialsNeeded} onChange={this.onChange} className=\"\" placeholder=\"List materials...\">\n                          </textarea>\n                       </div>\n                     </li>\n                   </ul>\n                 </div>\n               </div>\n               <div className=\"grid-100 pad-bottom\">\n                  <button className=\"button\" onClick={this.updateCourse}type=\"submit\">Update Course</button>\n                  <button className=\"button button-secondary\" onClick={() => this.props.history.push(`/courses/${this.props.id}`)}>Cancel</button>\n               </div>\n             </form>\n           </div>\n         </div>\n      );\n   }\n}\nexport default withRouter(UpdateCourse);\n"]},"metadata":{},"sourceType":"module"}